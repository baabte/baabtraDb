db.system.js.save({_id:"fnEvaluateAnswer",value:function(r,e,a){var m=db.clnUserCourseMapping.findOne({_id:ObjectId(r)}),d=a.split("."),k=m.courseTimeline[d[0]][d[1]][d[2]],o="Added";if(k.markScored>0&&(m.markScored=m.markScored-k.markScored,o="Updated"),m.markSheetElements&&-1!=m.markSheetElements.indexOf(a)){var c=e.syllabus.key.split("."),s=m.syllabus;for(var n in c)s=s[c[n]];e.markScored&&(s.mark.markScored||(s.mark.markScored=0),s.mark.markScored=s.mark.markScored+(e.markScored-k.markScored)/e.totalMark*s.mark.maxMark/s.element.length)}return e.markScored&&(m.markScored=m.markScored+e.markScored),m.courseTimeline[d[0]][d[1]][d[2]]=e,db.clnUserCourseMapping.save(m),{result:o}}});
