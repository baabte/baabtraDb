db.system.js.save({_id:"fnAddUserNomination",value:function(e,d){if(void 0==e._id){var t={companyId:e.companyId,item:"Orders"},a={companyId:e.companyId,item:"Customers"},r=fnGetCode(t),n=fnGetCode(a);e.requesteeDetails.companyCustomerCode=n;var o=new ObjectId,c=JSON.parse(JSON.stringify(e.requesteeDetails));c._id=o,c.companyId=ObjectId(e.companyId),c.createdDate=ISODate(),c.updatedDate=ISODate(),c.crmId=ObjectId(d),c.urmId=ObjectId(d),c.activeFlag=1,db.clnCompanyCustomer.insert(c),e.requesteeDetails.companyCustomerId=o.valueOf(),e.companyId=ObjectId(e.companyId),e.customCompanyCode=r,e.status="Pending approval",e.createdDate=ISODate(),e.updatedDate=ISODate(),e.crmId=ObjectId(d),e.urmId=ObjectId(d),e.activeFlag=0,db.clnTrainingRequest.insert(e)}else db.clnTrainingRequest.update({_id:ObjectId(e._id)},{$set:{orderDetails:e.orderDetails,updatedDate:ISODate(),urmId:ObjectId(d)}});return db.clnTrainingRequest.findOne({orderFormId:e.orderFormId})}});

db.system.js.save({_id:"fnLoadCompanyCustomerDetails",value:function(e,n,a){return db.clnCompanyCustomer.findOne({eMail:e,companyId:ObjectId(n),type:a})}});
